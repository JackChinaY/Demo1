<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <link rel="shortcut icon" type="image/x-icon" href="image/favicon.ico"/>
    <link rel="stylesheet" href="zui/zui.css">
    <script src="javascript/jquery-2.0.3.min.js"></script>
    <script src="zui/zui.js"></script>
    <style type="text/css">
        body {

            padding: 0;
            margin: 0;
            font-family: 宋体;
            color: #000000;
            font-size: 16px;
            /*width: 100%;*/
            overflow: auto;
            overflow-x: scroll;
        }

        .box {
            filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr='#ffffff',endColorStr='#4682B4',gradientType=0);/* IE < 10 */
            background: -ms-linear-gradient(top, #ffffff, #4682B4);/* IE 10 */
            background: -webkit-gradient(linear, 0 0, 0 bottom, from(#ffffff), to(#4682B4));/* Webkit: Safari 5.1+, Chrome 10+ */
            margin-top: 50px;
            margin-left: auto;
            margin-right: auto;
            width: auto;
            height: 570px;
            /*margin-top: 30px;*/
            padding-top: 60px;
        }

        .box-content {
            width: 480px;
            height: 490px;
            margin-left: auto;
            margin-right: auto;
            padding-top: 40px;
            padding-left: 30px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        /*.table-context tr {*/
            /*height: 50px;*/
        /*}*/

        /*.table-context tr td input {*/
            /*width: 250px;*/
        /*}*/
    </style>
    <script type="text/javascript">
        $(function () {
            //验证机器编号是否为正品
            $("#machineId").blur(function () {
                if ($("#machineId").val() == "") {
                    $("#checkinfo1").text("不能为空！");
                    $("#checkinfo1").css("color", "#FF0000");
                } else {
                    $.ajax({
                        type: "POST",
                        url: "Action_verifyMachine.action",
                        contentType: "application/x-www-form-urlencoded; charset=utf-8",
                        data: {
                            "machineType": $("#machineType").val(),
                            "machineId": $("#machineId").val()
                        },
                        dataType: "json",
                        cache: false,
                        success: function (data) {
                            if (data.jsonObject == "1") {
                                $("#checkinfo1").text("机器为正品！");
                                $("#checkinfo1").css("color", "#008000");
                                $("#submit1").attr('disabled', false);
                            } else if (data.jsonObject == "0") {
                                $("#checkinfo1").text("不存在此编号！");
                                $("#checkinfo1").css("color", "#FF0000");
                            }
                        },
                        error: function (jqXHR) {
                            $("#modal-content").html("发生错误代码：" + jqXHR.status + "，数据未加载成功！");
                            $("#myModal").modal();
                        }
                    });
                }
            });
            //验证用户名是否存在
            $("#username").blur(function () {
                if ($("#username").val() == "") {
                    $("#checkinfo2").text("不能为空！");
                    $("#checkinfo2").css("color", "#FF0000");
                } else {
                    $.ajax({
                        type: "POST",
                        url: "Action_verifyUsername.action",
                        contentType: "application/x-www-form-urlencoded; charset=utf-8",
                        data: {
                            "username": $("#username").val()
                        },
                        dataType: "json",
                        cache: false,
                        success: function (data) {
                            if (data.jsonObject == "0") {
                                $("#checkinfo2").text("验证通过！");
                                $("#checkinfo2").css("color", "#008000");
                                $("#submit1").attr('disabled', false);
                            } else if (data.jsonObject == "1") {
                                $("#checkinfo2").text("已被使用！");
                                $("#checkinfo2").css("color", "#FF0000");
                            }
                        },
                        error: function (jqXHR) {
                            $("#modal-content").html("发生错误代码：" + jqXHR.status + "，数据未加载成功！");
                            $("#myModal").modal();
                        }
                    });
                }
            });



            //注册
            $("#submituser").click(function () {
                if ($("#username").val() == "") {
                    new $.zui.Messager('用户名不能为空！', {
                        type:'danger',
                        placement: 'center' // 定义显示位置
                    }).show();
                } else if($("#checkinfo1").text() == "不存在此机器编号！") {
                    new $.zui.Messager('不存在此机器编号，请重新填写机器编号！', {
                        type:'danger',
                        placement: 'center'
                    }).show();
                }else if($("#checkinfo2").text() == "已被使用！") {
                    new $.zui.Messager('该用户名已被使用，请重新填写用户名！', {
                        type:'danger',
                        placement: 'center'
                    }).show();
                }else if($("#password").val() =="" || $("#confirm_password").val()=="" || $("#email").val()=="" || $("#adress").val()=="") {
                    new $.zui.Messager('存在部分信息未填，请填写完整！', {
                        type:'danger',
                        placement: 'center'
                    }).show();
                }else if($("#password").val() != $("#confirm_password").val() ) {
                    new $.zui.Messager('登录密码和确认密码不一致，请重新填写！', {
                        type:'danger',
                        placement: 'center'
                    }).show();
                }else{
                    $.ajax({
                        type: "POST",
                        url: "Action_register.action",
                        contentType: "application/x-www-form-urlencoded; charset=utf-8",
                        data: {
                            "username": $("#username").val(),
                            "password": $("#password").val(),
                            "email": $("#email").val(),
                            "tel": $("#tel").val(),
                            "address": $("#address").val(),
                            "machineType": $("#machineType").val(),
                            "machineId": $("#machineId").val()
                        },
                        dataType: "json",
                        cache: false,
                        success: function (data) {
                            if (data.jsonObject == "1") {
                                $("#modal-content").html("恭喜您，注册成功!");
                                $("#myModal").modal();
                            } else {
                                $("#modal-content").html("注册失败，请重新注册!");
                                $("#myModal").modal();
                            }
                        },
                        error: function (jqXHR) {
                            $("#modal-content").html("发生错误代码：" + jqXHR.status + "，数据未加载成功！");
                            $("#myModal").modal();
                        }
                    });
                }
            });

            // 将name=login的文本框清空，以便重新输入
            $("#button_login_clear").click(function () {
                $(".form-control").val("");
            });
        })
    </script>
</head>
<body>
<br>
<div style="float: left"><h1 style="font-family: 幼圆; width: 500px">&nbsp; 欢迎注册！</h1></div>
<div style="float: right;margin-right: 50px;margin-top: 10px"><a type="submit" href="login.html" style="font-weight: 900;font-size: 20px;font-family: 黑体">登 录</a></div>

<div class="box">
    <div class="box-content">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-3">机器型号</label>
                <div class="col-sm-6">
                    <select id="machineType" class="form-control">
                        <option value="HGT-752" selected="selected">HGT-752</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3">机器编号</label>
                <div class="col-sm-6">
                    <input id="machineId" type="text" class="form-control" placeholder="请输入机器编号">
                </div>
                <span id="checkinfo1"></span>
            </div>
            <div class="form-group">
                <label class="col-sm-3">用 户 名</label>
                <div class="col-sm-6">
                    <input id="username" type="text" class="form-control" placeholder="请输入用户名">
                </div>
                <span id="checkinfo2"></span>
            </div>
            <div class="form-group">
                <label class="col-sm-3">登录密码</label>
                <div class="col-sm-6">
                    <input id="password" type="password" class="form-control" placeholder="请输入登录密码">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3">确认密码</label>
                <div class="col-sm-6">
                    <input id="confirm_password" type="password" class="form-control" placeholder="请输入确认密码">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3">邮&nbsp;&nbsp;箱</label>
                <div class="col-sm-6">
                    <input id="email" type="text" class="form-control" placeholder="请输入邮箱">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3">电话号码</label>
                <div class="col-sm-6">
                    <input id="tel" type="number" class="form-control" placeholder="请输入电话号码">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3">地&nbsp;&nbsp;址</label>
                <div class="col-sm-6">
                    <input id="address" type="text" class="form-control" placeholder="请输入地址">
                </div>
            </div>
        </form>
        <br>
        <input id="submituser" type="submit" value="注册" class="btn btn-primary"
               style="margin-left:120px">
        <input id="button_login_clear" class="btn btn-danger" type="button" style="margin-left: 50px" value="重置">
    </div>
    <br>
</div>
<!--对话框-->
<div class="modal fade" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span
                        class="sr-only">关闭</span></button>
                <h4 class="modal-title">提示</h4>
            </div>
            <div class="modal-body">
                <p id="modal-content" style="font-weight: 800"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal" onclick="location.href='login.html'">返回登录</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>